<!-- consultantdashboard.html -->
<div class="d-flex flex-column flex-md-row min-vh-100 bg-light">
  <!-- Sidebar -->
  <div class="bg-white shadow-sm p-4 d-flex flex-column justify-content-between" style="width: 260px;">
    <div>
      <button class="btn btn-outline-danger w-100 mb-3" (click)="logout()">üîì Logout</button>
      <button class="btn btn-outline-primary w-100 mb-2" (click)="viewMode = false">‚úèÔ∏è Edit Profile</button>
    </div>
  </div>

  <!-- Main Panel -->
  <div class="flex-fill p-4">
    <div class="bg-white rounded shadow-sm p-4">
      <!-- Edit Mode -->
      <div *ngIf="!viewMode">
        <h3 class="mb-4 text-primary fw-bold">üìù Edit Profile</h3>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-control" [(ngModel)]="name" />
          </div>

          <div class="col-md-6">
            <label class="form-label">Expertise</label>
            <input type="text" class="form-control" [(ngModel)]="expertise" />
          </div>

          <div class="col-12">
            <label class="form-label">Bio</label>
            <textarea class="form-control" rows="3" [(ngModel)]="bio"></textarea>
          </div>

          <div class="col-md-6">
            <label class="form-label">Available From</label>
            <input type="datetime-local" class="form-control" [(ngModel)]="availabilityFrom" />
          </div>

          <div class="col-md-6">
            <label class="form-label">Available To</label>
            <input type="datetime-local" class="form-control" [(ngModel)]="availabilityTo" />
          </div>

          <div class="col-md-6">
            <label class="form-label">Consultation Rates (‚Çπ)</label>
            <div class="input-group">
              <button class="btn btn-outline-secondary" type="button" (click)="adjustRate(-100)">-</button>
              <input type="number" class="form-control text-center" [(ngModel)]="rates" />
              <button class="btn btn-outline-secondary" type="button" (click)="adjustRate(100)">+</button>
            </div>
          </div>

          <div class="col-12">
            <label class="form-label">Upload Profile Image</label>
            <input type="file" class="form-control" (change)="onImageUpload($event)" />
            <div *ngIf="uploading" class="small mt-2 text-info">Uploading image...</div>
          </div>

          <div class="col-12">
            <label class="form-label">Upload Provisional Certificate (PDF/Image)</label>
            <input type="file" class="form-control" accept=".pdf,image/*" (change)="onCertificateUpload($event)" />
            <div *ngIf="certificateUploading" class="small mt-2 text-info">Uploading certificate...</div>
          </div>

          <div class="col-12 text-end mt-3">
            <button class="btn btn-success px-4" (click)="saveProfile()">üíæ Save</button>
          </div>
        </div>
      </div>

      <!-- View Mode -->
      <div *ngIf="viewMode">
        <div class="text-center">
          <img [src]="imageUrl || 'https://via.placeholder.com/150'" class="rounded-circle mb-3 shadow-sm" width="160" height="160" style="object-fit: cover;" />
          <h4 class="fw-bold">{{ name }}</h4>
          <p class="text-muted">{{ bio }}</p>
        </div>

        <hr />

        <div class="row g-3">
          <div class="col-md-6">
            <strong>Available From:</strong> {{ getReadableDate(availabilityFrom) }}
          </div>
          <div class="col-md-6">
            <strong>Available To:</strong> {{ getReadableDate(availabilityTo) }}
          </div>
          <div class="col-md-6">
            <strong>Expertise:</strong> {{ expertise }}
          </div>
          <div class="col-md-6">
            <strong>Consultation Rates:</strong> ‚Çπ{{ rates }}
          </div>
          <div class="col-md-12 mt-3">
            <strong>Provisional Certificate:</strong>
            <a *ngIf="certificateUrl" [href]="certificateUrl" target="_blank" class="btn btn-sm btn-outline-success ms-2">
              üìÑ View Certificate
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
